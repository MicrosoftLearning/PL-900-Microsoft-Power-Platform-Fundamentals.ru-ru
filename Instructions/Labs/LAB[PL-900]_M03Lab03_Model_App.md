---
lab:
  title: Лабораторная работа 2. Создание приложения на основе модели
  module: 'Module 3: Get started with Power Apps'
ms.openlocfilehash: 94c418ce7aaf35f5b31ff2c7bc42d57e8d13c5b4
ms.sourcegitcommit: fc79a9b68a8235b37fd90ef84ba8ae1aa2e581f5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2022
ms.locfileid: "144424680"
---
# <a name="module-3-get-started-with-power-apps"></a>Модуль 3. Начало работы с Power Apps
## <a name="lab-2-how-to-build-a-model-driven-app"></a>Лабораторная работа 2. Создание приложения на основе модели

# <a name="scenario"></a>Сценарий

Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий. Сейчас для регистрации посетителей кампуса используются бумажные журналы. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу.

Администрация кампуса хотела бы модернизировать систему регистрации посетителей таким образом, чтобы допуск в здания контролировали сотрудники службы безопасности, а обитатели кампуса предварительно регистрировали все визиты и обязательно записывали их.

В этом курсе обучения вы разработаете приложения и реализуете автоматические процедуры, позволяющие администрации и службе охраны Bellows College контролировать доступ в здания кампуса.

В этом задании вам предстоит создать приложение Power Apps на основе модели, чтобы обеспечить служебному персоналу возможность управлять записями о посещениях всего кампуса.

# <a name="high-level-lab-steps"></a>Обзор этапов работы над общим заданием

Создание приложение на основе модели состоит из следующих этапов:

-   создание нового приложения на основе модели под именем «Управление кампусом»;

-   редактирование элементов навигации приложения для связи с необходимыми таблицами;

-   настройка форм и представлений таблиц, необходимых для приложения.

Мы будем работать со следующими компонентами.

-   **Представления**: представления позволяют пользователю отображать существующие данные в табличной форме.

-   **Формы**: здесь пользователь создает новые строки в таблицах или обновляет их.

Оба компонента интегрируются в приложение на основе модели, чтобы улучшить взаимодействие с пользователем.

## <a name="prerequisites"></a>Предварительные требования

-   Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»** .

-   Выполнить **задание 1 модуля 2 «Моделирование данных»** .

## <a name="things-to-consider-before-you-begin"></a>Что необходимо знать перед началом работы?

-   Какие изменения следует внести, чтобы улучшить взаимодействие с пользователем?

-   Что необходимо включить в приложение на основе модели в зависимости от созданной нами модели данных?

-   Как можно настроить карту сайта для приложения на основе модели?

# <a name="exercise-1-customize-views-and-forms"></a>Упражнение \#1. Настройка представлений и форм

**Цель упражнения.** В этом упражнении вы настроите представления и формы для созданных ранее таблиц и сможете использовать их в приложении на основе модели.

## <a name="task-1-edit-visit-form"></a>Задача \#1. Редактирование формы для визита

1.  Войдите в <https://make.powerapps.com> (если это еще не сделано)

2.  В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3.  Используя навигацию слева, разверните элемент **Dataverse**, выберите **Таблицы** и откройте таблицу **Визит**.

4.  Выберите вкладку **Формы** и откройте форму сведений с типом **Основные**.

>   **ВАЖНО**. *По умолчанию всем формам задано имя «Сведения». Обязательно проверьте, что выбранная форма имеет тип* **Основные** *и никакой другой.*

>   По умолчанию в форме имеется два поля: «Имя» (основное поле) и «Владелец».

5.  В правой части экрана в разделе свойств выберите поле **Отображаемое имя** и введите значение **Основные сведения**.

6.  В меню в верхней части экрана выберите **+ Поле формы** и добавьте под полем **Владелец** следующие поля, перетаскивая столбцы в форму или просто щелкая заголовки столбцов:

    1.  **Посетитель**

    2.  **Scheduled Start**

    3.  **Планируемое окончание**

    4.  **Фактическое начало**

    5.  **Фактическое окончание**

7.  Перетащите столбец **Код** в заголовок формы.

>   Заголовок — это верхняя правая область формы. Возможно, вам придется свернуть панель «Свойства» в правой части экрана, чтобы увидеть поле в форме.

8.  Не снимая выделения с поля **Код**, установите флажок **Только для чтения** на панели «Свойства» в правой части экрана.

9.  Выберите поле **Владелец**. На панели «Свойства» измените **метку поля** на **Организатор**.

10.  Нажмите **Сохранить** в правом верхнем углу и дождитесь завершения сохранения.

11.  Нажмите кнопку **Опубликовать** в правом верхнем углу и дождитесь завершения публикации.

12.  Если представление редактирования открылось в новой вкладке, закройте ее. В противном случае нажмите кнопку **Назад** в левом верхнем углу экрана. Теперь следует вернуться на вкладку форм для сущности "Визит".

## <a name="task-2-edit-active-visits-view"></a>Задача \#2. Изменение представления «Активные визиты»

В этой задаче мы изменим представление «Активные визиты» по умолчанию и создадим новое представление для визитов текущего дня.

1.  Выберите вкладку **Представления** и откройте представление **Активные визиты**.

2.  Щелчком мыши или перетаскиванием добавьте в представление следующие поля:

    1.  **Код**

    2.  **Посетитель**

    3.  **Scheduled Start**

    4.  **Планируемое окончание**

3.  Выберите столбец **Время создания** и нажмите **Удалить**. Поле **Время создания** будет удалено из представления.

4.  Измените ширину отдельных столбцов, чтобы в них умещались данные.

5.  Нажмите **Сохранить** и дождитесь сохранения изменений.

6.  Нажмите **Опубликовать** и дождитесь завершения публикации.

## <a name="task-3-create-new-view-for-todays-visits"></a>Задача \#3. Создание представления для визитов текущего дня

Теперь мы клонируем это представление, чтобы создать новое представление для визитов текущего дня.

1.  На панели свойств перейдите по ссылке **Изменить фильтры**.

2.  Нажмите **Добавить** и выберите **Добавить строку**.

3.  Выберите поле **Планируемое начало**, затем в раскрывающемся списке выберите условие **Сегодня**.

4.  Щелкните **...** в строке **Состояние** и нажмите кнопку **Удалить**, чтобы удалить это условие фильтра.

5.  Для сохранения условия нажмите **OK**. Теперь представление отфильтровано и будет отображать только записи, в которых дата начала запланирована на сегодня.

6.  Добавьте в представление поля **Фактическое начало** и **Фактическое окончание**.

> **Примечание**. Поскольку фильтр по состоянию представления не работает, мы увидим все сегодняшние визиты, в том числе завершенные. Эти поля помогут отделить завершенные визиты от текущих.

7.  Нажмите **стрелку раскрывающегося списка** рядом с кнопкой «Сохранить» (будьте осторожны, не нажимайте саму кнопку) и выберите команду **Сохранить как**.

8.  Измените имя на **Сегодняшние визиты** и нажмите **Сохранить**.

9.  Нажмите **Опубликовать** и дождитесь завершения публикации.

# <a name="exercise-2-create-model-driven-application"></a>Упражнение \#2. Создание приложения на основе модели

**Цель упражнения.** В этом упражнении вы создадите приложение на основе модели, настроите карту сайта и протестируете приложение.

>   Для простоты и экономии времени мы не будем рассматривать некоторые столбцы таблицы визитов в этом задании. 

## <a name="task-1-create-application"></a>Задача \#1. Создание приложения

1.  Войдите в <https://make.powerapps.com> (если это еще не сделано).

2.  В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3.  Создайте приложение на основе модели, выполнив приведенные ниже действия.

    1.  Выберите **Пустое приложение** в разделе **Начать с** на начальном экране.

    2.  В разделе **Пустое приложение на основе Dataverse** нажмите кнопку **Создать**.

    3.  Выберите интерфейс **конструктора современных приложений**.
    
    4.  Нажмите кнопку **создания**.
    
    5.  Введите **Управление Bellows Campus**  в качестве имени и нажмите кнопку **Создать**.

4.  После загрузки нового приложения на основе модели нажмите кнопку **+ Добавить страницу**.

5.  На экране «Добавление страницы» выберите **Представление и форма на основе таблицы**, а затем нажмите кнопку **Далее**.

6.  Добавьте следующие таблицы:

    1.  Перейдите по адресу

    2.  Contact

7.  Выбрав 2 таблицы, нажмите кнопку **Добавить**.

8.  Используя значки навигации в левой части экрана, выберите **Навигация**.

9.  В области навигации выберите текст **Группа 1** под строкой навигации.

10.  В правой части экрана в разделе **Параметры отображения** в поле **Заголовок** укажите **Безопасность**.

## <a name="task-1-edit-your-app"></a>Задача \#1. Редактирование приложения
Теперь, когда в приложение на основе модели добавлены все необходимые компоненты, их нужно упорядочить.

1.  В области навигации в группе безопасности выберите **Подобласть 1**.

2.  Нажмите **многоточие** и в появившемся меню выберите **Удалить подобласть 1**.

3.  Используя навигацию в левой части экрана, выберите **Страницы**.

4.  Найдите и разверните таблицу **Визиты** в области «Страницы».

5.  Выберите форму **Визит**.

6.  В правой части экрана выберите **Управление формами**.

7.  Выберите форму **Основные сведения** и нажмите кнопку **Сохранить**.

8.  В таблице **Визит** слева выберите **Представление «Визит»** .

9.  В правой части экрана выберите **Управление представлениями**.

10. Выберите формы **Сегодняшние визиты** и **Активные визиты**, а затем нажмите кнопку **Сохранить**.

11. В верхней части приложения в левой части экрана нажмите кнопку **Сохранить**.

12. После завершения **сохранения** нажмите кнопку **Опубликовать**, чтобы опубликовать изменения.

## <a name="task-2-test-application"></a>Задача \#2. Тестирование приложения

1.  Запуск приложения

    1.  Выберите **Воспроизвести**, чтобы открыть приложение в новом окне.

2.  Создайте новый контакт.

    1.  Приложение должно открыться в представлении **Мои активные контакты**.

    2.  Выберите пункт **Создать** в верхнем меню.

    3.  В поле **Имя** введите `John`, в поле **Фамилия** — `Doe`.

    4.  В поле **Email** укажите свой личный адрес электронной почты. Он будет использован в одном из заданий позже.

    5.  Щелкните **Сохранить и закрыть**.

    6.  После этого созданный контакт должен отобразиться в представлении **Активные контакты**.

4.  Создайте новый визит.

    1.  Выберите **Визиты** на карте сайта.

    2.  Нажмите кнопку **Создать**.

    3.  Введите следующие поля:

        1.  **Имя**: `New test visit`

        2.  **Посетитель**: Выберите Александра Демидова

        3.  **Планируемое начало**: выберите завтрашнее число и время начала 14:00

        4.  **Планируемое окончание**: выберите завтрашнее число и время окончания 15:30

    4.  Щелкните **Сохранить и закрыть**. В результате будет создан визит, и вы должны увидеть его в представлении активных визитов.

    5.  Перейдите к представлению **Сегодняшние визиты**. В этом представлении новый визит отображаться не должен, так как он запланирован на завтра.

5.  Вы можете добавить еще несколько тестовых записей.

    Работающее приложение должно выглядеть примерно так:

![](media/3-model-driven-app.png)

# <a name="challenges"></a>Сложности

-   Выбор конкретных представлений и форм для контактов

---
lab:
  title: Лабораторная работа 3. Создание приложения на основе модели
  module: 'Module 3: Get started with Power Apps'
---

# <a name="lab-3-how-to-build-a-model-driven-app"></a>Лабораторная работа 3. Создание приложения на основе модели

## <a name="scenario"></a>Сценарий

Bellows College is an educational organization with multiple buildings on campus. Campus visitors are currently recorded in paper journals. The information is not captured consistently, and there are no means to collect and analyze data about the visits across the entire campus.

Администрация кампуса хотела бы модернизировать систему регистрации посетителей таким образом, чтобы допуск в здания контролировали сотрудники службы безопасности, а обитатели кампуса предварительно регистрировали все визиты и обязательно записывали их.

В этом курсе обучения вы разработаете приложения и реализуете автоматические процедуры, позволяющие администрации и службе охраны Bellows College контролировать доступ в здания кампуса.

В этом задании вам предстоит создать приложение Power Apps на основе модели, чтобы обеспечить служебному персоналу возможность управлять записями о посещениях всего кампуса.

Обзор этапов работы над общим заданием

Создание приложение на основе модели состоит из следующих этапов:

- создание нового приложения на основе модели под именем «Управление кампусом»;

- редактирование элементов навигации приложения для связи с необходимыми таблицами;

- настройка форм и представлений таблиц, необходимых для приложения.

Мы будем работать со следующими компонентами.

- **Представления**: представления позволяют пользователю отображать существующие данные в табличной форме.

- **Формы**: здесь пользователь создает новые строки в таблицах или обновляет их.

Оба компонента интегрируются в приложение на основе модели, чтобы улучшить взаимодействие с пользователем.

Предварительные требования

- Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»** .
- Выполнить **задание 1 модуля 2 "Моделирование данных"** .

Что необходимо знать перед началом работы?

- Какие изменения следует внести, чтобы улучшить взаимодействие с пользователем?
- Что необходимо включить в приложение на основе модели в зависимости от созданной нами модели данных?
- Как можно настроить карту сайта для приложения на основе модели?

## <a name="exercise-1-customize-views-and-forms"></a>Упражнение 1. Настройка представлений и форм

**Цель упражнения.** В этом упражнении вы настроите представления и формы для созданных ранее таблиц и сможете использовать их в приложении на основе модели.

### <a name="task-1-edit-visit-form"></a>Задача \#1. Редактирование формы для визита

1. Войдите в [https://make.powerapps.com](https://make.powerapps.com/) (если это еще не сделано).

2. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3. Используя навигацию слева, разверните элемент **Dataverse**, выберите **Таблицы** и откройте таблицу **Визит**.

Если таблица визитов не отображается, убедитесь, что вы находитесь в правильной среде (шаг 2).

4. В разделе **Возможности данных** выберите элемент **Формы** и щелкните форму "Сведения" с типом **Основная**, чтобы открыть ее.

<bpt id="p1">**</bpt>IMPORTANT:<ept id="p1">**</ept> Since by default all forms are named Information, make sure to verify that the form you select has a Form Type of <bpt id="p2">**</bpt>Main<ept id="p2">**</ept> and not something else. By default, the form has two fields: Name and Owner.

5. В правой части экрана в разделе свойств выберите поле **Отображаемое имя** и присвойте ему новое значение **Основные сведения**.

6. В меню в верхней части экрана выберите **+ Поле формы** и добавьте под полем **Владелец** следующие поля, перетаскивая столбцы в форму или просто щелкая заголовки столбцов:

    1. **Посетитель**

    1. **Scheduled Start**

    1. **Планируемое окончание**

    1. **Фактическое начало**

    1. **Фактическое окончание**

7. Перетащите столбец **Код** в заголовок формы.

The header is the top right area of the form. You may need to collapse the Properties panel on the right side of the screen to see the field on the form.

8. Не снимая выделения с поля **Код**, установите флажок **Только для чтения** на панели «Свойства» в правой части экрана.

9. Select <bpt id="p1">**</bpt>Owner<ept id="p1">**</ept> field. In the Properties panel, change the <bpt id="p1">**</bpt>Label<ept id="p1">**</ept> to <bpt id="p2">**</bpt>Host<ept id="p2">**</ept>

10. Нажмите **Сохранить** в правом верхнем углу и дождитесь завершения сохранения.

11. Нажмите кнопку **Опубликовать** в правом верхнем углу и дождитесь завершения публикации.

12. Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий.

13. Сейчас для регистрации посетителей кампуса используются бумажные журналы.

### <a name="task-2-edit-active-visits-view"></a>Задача \#2. Изменение представления «Активные визиты»

В этой задаче мы изменим представление "Активные визиты" по умолчанию и создадим новое представление для визитов текущего дня.

1. В разделе **Возможности данных** выберите **Представления** и щелкните представление **Активные визиты**, чтобы открыть его.

2. Щелчком мыши или перетаскиванием добавьте в представление следующие поля:

    1. **Код**

    2. **Посетитель**

    3. **Scheduled Start**

    4. **Планируемое окончание**

3. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу.

4. Измените ширину отдельных столбцов, чтобы в них умещались данные.

5. Нажмите **Сохранить** и дождитесь сохранения изменений.

6. Нажмите **Опубликовать** и дождитесь завершения публикации.

### <a name="task-3-create-new-view-for-todays-visits"></a>Задача 3. Создание представления для визитов текущего дня

Теперь мы клонируем это представление, чтобы создать новое представление для визитов текущего дня.

ВАЖНО. Убедитесь, что представление "Активные визиты" осталось открытым, так как на его основе мы создадим представление для визитов текущего дня.

1. Нажмите **стрелку раскрывающегося списка** рядом с кнопкой «Сохранить» (будьте осторожны, не нажимайте саму кнопку) и выберите команду **Сохранить как**.

2. Измените имя на **Сегодняшние визиты** и нажмите **Сохранить**.

3. На панели свойств перейдите по ссылке **Изменить фильтры**.

4. Нажмите **Добавить** и выберите **Добавить строку**.

5. Выберите поле **Планируемое начало**, затем в раскрывающемся списке выберите условие **Сегодня**.

6. Click the <bpt id="p1">**</bpt>…<ept id="p1">**</ept> on the <bpt id="p1">**</bpt>Status<ept id="p1">**</ept> row and click <bpt id="p2">**</bpt>Delete<ept id="p2">**</ept> to delete that filter condition.

7. Press <bpt id="p1">**</bpt>Ok<ept id="p1">**</ept> to save the condition. The view is now filtered to show only records where the Scheduled Start date is today.

8. Добавьте в представление поля **Фактическое начало** и **Фактическое окончание**.

<bpt id="p1">**</bpt>Note:<ept id="p1">**</ept> Since we no longer filter on the view status, we will get all today’s visits including completed ones. These fields will help to differentiate completed visits and visits in progress.

1. Выберите команду **Сохранить**.

2. Нажмите **Опубликовать** и дождитесь завершения публикации.

## <a name="exercise-2-create-model-driven-app"></a>Упражнение 2. Создание приложения на основе модели

**Цель упражнения.** В этом упражнении вы создадите приложение на основе модели, настроите карту сайта и протестируете приложение.

Для простоты и экономии времени мы не будем рассматривать некоторые столбцы таблицы визитов в этом задании.

### <a name="task-1-create-app"></a>Задача \#1. Создание приложения

1. Войдите в [https://make.powerapps.com](https://make.powerapps.com/) (если это еще не сделано).

2. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3.  При необходимости щелкните значок **Главная** в левой части экрана.

3. Создайте приложение на основе модели, выполнив приведенные ниже действия.

    1. Выберите **Пустое приложение** в разделе **Начать с** на начальном экране.

    1. В разделе **Пустое приложение на основе Dataverse** нажмите кнопку **Создать**.

    1. Введите **Управление Bellows Campus**  в качестве имени и нажмите кнопку **Создать**.

4. После загрузки нового приложения на основе модели нажмите кнопку **+ Добавить страницу**.

5. На экране «Добавление страницы» выберите **Представление и форма на основе таблицы**, а затем нажмите кнопку **Далее**.

6. Добавьте следующие таблицы:

    1. Перейдите по адресу

    1. Contact

7. Выбрав 2 таблицы, нажмите кнопку **Добавить**.

8. Используя значки навигации в левой части экрана, выберите **Навигация**.

9. В области навигации выберите **Группа 1** под строкой навигации.

10. В правой части экрана в разделе **Параметры отображения** присвойте свойству **Заголовок** новое значение **Безопасность**.

### <a name="task-2-edit-your-app"></a>Задача 2. Редактирование приложения

Теперь, когда в приложение на основе модели добавлены все необходимые компоненты, их нужно упорядочить.

1. В области навигации в группе безопасности выберите **SubArea1**.

2. Щелкните **многоточие** и в появившемся меню выберите **Удалить SubArea1**.

3. Используя навигацию в левой части экрана, выберите **Страницы**.

4. Найдите и разверните таблицу **Визит** в области "Страницы".

5. Выберите форму **Визит**.

6. В правой части экрана нажмите кнопку **Добавить форму**.

7. Выберите форму **Основные сведения**.

8. На панели страниц в разделе **Визит** щелкните **Представление визита**.

9. В правой части экрана нажмите кнопку **Добавить представление**.

10. Выберите представление **Сегодняшние визиты**.

11. Еще раз нажмите **Добавить представление**. 

12. Выберите представление **Активные визиты**. 

13. Щелкните **Сохранить**.

14. После завершения **сохранения** нажмите кнопку **Опубликовать**, чтобы опубликовать изменения.

### <a name="task-3-test-application"></a>Задача 3. Тестирование приложения

1. Запуск приложения

    1. Выберите **Воспроизвести**, чтобы открыть приложение в новом окне.

2. Создайте новый контакт.

    1. The app should open to the <bpt id="p1">**</bpt>My Active Contacts<ept id="p1">**</ept> view. If it does not, select Contacts on the left-hand navigation.

    1. Выберите пункт **Создать** в верхнем меню.

    1. Укажите в поле **Имя** Александр, а в поле **Фамилия** — Демидов.

    1. Provide your personal email as <bpt id="p1">**</bpt>Email<ept id="p1">**</ept>. This will be used in a future lab where you will receive an email.

    1. Щелкните **Save & Close** (Сохранить и закрыть).

    1. После этого созданный контакт должен отобразиться в представлении **Мои активные контакты**.

3. Создайте новый визит.

    1. Выберите **Визиты** в области навигации слева на карте сайта.

    1. Щелкните **+ Создать**.

    1. Введите следующие поля:

        1. **Имя**: Новый тестовый визит

        1. **Посетитель**: Выберите Александра Демидова

        1. **Запланированное начало**: выберите завтрашнее число и время начала 14:00

        1. **Запланированное окончание**: выберите завтрашнее число и время окончания 15:30

- Click <bpt id="p1">**</bpt>Save &amp; Close<ept id="p1">**</ept>. This will create the Visit and you should be able to see it on the Active Visits View.

- Change view to <bpt id="p1">**</bpt>Today’s Visits<ept id="p1">**</ept>. You should no longer see the new visit in the view, since it is scheduled for tomorrow.

4. Вы можете добавить еще несколько тестовых записей.

Работающее приложение должно выглядеть примерно так:

![](media/3-model-driven-app.png)

Congratulations! You have created and configured your first model-driven app.

## <a name="challenges"></a>Сложности

- Выбор конкретных представлений и форм для контактов
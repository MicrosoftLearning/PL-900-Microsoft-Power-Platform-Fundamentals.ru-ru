---
lab:
  title: Задание 1. Моделирование данных
  module: 'Module 2: Introduction to Microsoft Dataverse'
ms.openlocfilehash: 05d0f0656ae0d93f5666f7c14602c3976a9a9ac9
ms.sourcegitcommit: ef58c858463b890e923ef808b1d43405423943fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2022
ms.locfileid: "137899016"
---
# <a name="module-2-introduction-to-microsoft-dataverse"></a>Модуль 2. Знакомство с Microsoft Dataverse

# <a name="scenario"></a>Сценарий

Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий. Сейчас для регистрации посетителей кампуса используются бумажные журналы. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу. 

Администрация кампуса хотела бы модернизировать систему регистрации посетителей таким образом, чтобы допуск в здания контролировали сотрудники службы безопасности, а обитатели кампуса предварительно регистрировали все визиты и обязательно записывали их.

В этом курсе обучения вы разработаете приложения и реализуете автоматические процедуры, позволяющие администрации и службе охраны Bellows College контролировать доступ в здания кампуса. 

В этом задании вы войдете в свою среду, создадите базу данных Microsoft Dataverse и разработаете решение для отслеживания вносимых изменений. Кроме того, вы создадите модель данных, пригодную для выполнения следующих функций:

-   R1 — отслеживание мест (зданий), посещаемых в кампусе;
-   R2 — запись основной информации, позволяющей опознавать и отслеживать посетителей; 
-   R3 — планирование, регистрация визитов и управление ими. 

В конце работы вы импортируете образец данных в Microsoft Dataverse.

# <a name="high-level-lab-steps"></a>Обзор этапов работы над общим заданием

Для подготовки учебных сред необходимо выполнить следующее:

* создать решение и издателя;
* добавить новые и существующие компоненты, необходимые для выполнения требуемых функций приложения. Описание метаданных (таблицы и связи) можно найти в [документе с описанием модели данных](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/blob/master/Allfiles/Campus%20Management.png). Чтобы открыть этот документ в новом окне, щелкните ссылку, удерживая нажатой клавишу CTRL, либо щелкните ссылку правой кнопкой мыши.

После выполнения всех настроек в вашем решении будет несколько таблиц:

-   Contact
-   Сборка
-   Перейдите по адресу

## <a name="prerequisites"></a>Предварительные требования.

* Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»** .

## <a name="things-to-consider-before-you-begin"></a>Что необходимо учитывать перед началом работы?

* Соглашение об именовании

* Типы данных и ограничения (например, максимальную длину имени)

* Форматы даты и времени для облегчения локализации

# <a name="exercise-1-create-solution"></a>Упражнение \#1. Создание решения

## <a name="task-1-create-solution-and-publisher"></a>Задача \#1. Создание решения и издателя

1.  Создание решения

    -   Перейдите к <https://make.powerapps.com>. При необходимости повторной аутентификации нажмите **Войти** и следуйте указаниям на экране.

    -   Выберите свою среду в раскрывающемся меню **Среда**, расположенном в правом верхнем углу экрана.

    -   В разделе **Решения** левого меню выберите пункт **Создать решение**.

    -   В поле **Отображаемое имя** введите строку **[Ваша фамилия]: управление кампусом**.

2.  Создание издателя

    -   В разделе **Издатель** выберите **+ Издатель**

    -   В поле **Отображаемое имя** всплывающего окна введите **Bellows College**. 

    -   В поле **Имя** введите **BellowsCollege**.
    
    -   В поле **Префикс** введите **bc**

    -   Нажмите кнопку **Сохранить**
    
    -   Во всплывающем окне нажмите **Готово**.

3.  Завершите создание решения.

    -   В раскрывающемся списке **Издатель** выберите вновь созданный издатель **Bellows College**.

    -   Убедитесь, что в поле **Версия** установлено значение **1.0.0.0** 
    
    -   Нажмите кнопку **Создать**.

# <a name="exercise-2-add-existing-and-create-new-tables"></a>Упражнение \#2. Добавление существующих и создание новых таблиц

**Цель упражнения.** В этом упражнении вы добавите стандартную таблицу «Контакт» и создадите в составе решения новые произвольные таблицы для зданий и визитов. 

## <a name="task-1-add-existing-table"></a>Задача \#1. Добавление существующей таблицы

1.  Откройте только что созданное решение **Управление кампусом**.

2.  Нажмите **Добавить существующее** и выберите вариант **Таблица**.

3.  Выберите нужный **контакт**.

4.  Щелкните **Далее**.

5.  В разделе «Контакт» нажмите **Выбрать компоненты**.

6.  На вкладке **Представления** выберите **Активные контакты**. Нажмите кнопку **Добавить**.
    
7.  Еще раз нажмите **Выбрать компоненты**.

8.  На вкладке **Формы** выберите форму **Контакт**.
    
9.  Нажмите кнопку **Добавить**.

    > Должны быть выбраны **одно представление** и **одна форма**. 
    
10.  Нажмите кнопку **Добавить** еще раз. Таким образом в новое решение добавится таблица «Контакт» с выбранными представлением и формой.

> Теперь в ваше решение включена одна таблица «Контакт».
    
## <a name="task-2-create-building-table"></a>Задача 2. Создание таблицы зданий

1.  В браузере должна быть открыта страница вашего решения «Управление кампусом». Если это не так, откройте решение «Управление кампусом», выполнив следующие действия.

    * Войдите в <https://make.powerapps.com> (если это еще не сделано)
    
    * Щелкните **Решения** и нажатием соответствующей кнопки выберите вновь созданное решение **[Ваша фамилия]: управление кампусом**.
          
2.  Создание таблицы зданий

    -   Нажмите **Создать** и выберите **Таблица**.
    
    -   В поле **Отображаемое имя** введите **Здание** 
    
    -   Выберите команду **Сохранить**. В результате запустится фоновый процесс подготовки таблицы, а вы сможете приступить к добавлению других таблиц и столбцов.

## <a name="task-3-create-visit-table-and-columns"></a>Задача 3. Создание таблицы визитов со столбцами

В таблицу **Визит** будет заноситься информация о посещениях кампуса, в том числе информация о здании и посетителе, планируемое и фактическое время каждого визита. 

Каждому визиту желательно присвоить уникальный номер, чтобы посетитель мог просто ввести его и назвать по требованию при регистрации визита.

> При записи даты и времени мы будем использовать поведение **Независимо от часового пояса**, поскольку время визита всегда будет местным для данного здания и не будет меняться при просмотре из другого часового пояса. 

1.  В браузере должна быть открыта страница вашего решения «Управление кампусом». Если это не так, откройте решение «Управление кампусом», выполнив следующие действия.

    * Войдите в <https://make.powerapps.com> (если это еще не сделано)
    
    * Щелкните **Решения** и нажатием соответствующей кнопки выберите вновь созданное решение **[Ваша фамилия]: управление кампусом**.

2. Создание таблицы визитов

   * Нажмите **Создать** и выберите **Таблица**.
   
   * В поле **Отображаемое имя** введите **Визит** 
   
   * Выберите команду **Сохранить**. В результате запустится фоновый процесс подготовки таблицы, а вы сможете приступить к добавлению других столбцов.

3. Создайте столбец для планируемого начала визита

   * Выберите таблицу **Визит**.

   * Выберите вкладку **Столбцы** и нажмите **Добавить столбец**.
   
   * В поле **Отображаемое имя** введите **Планируемое начало**.
   
   * В поле **Тип данных** выберите **Дата и время**.
   
   * В поле **Обязательно** выберите вариант **Обязательно**.
   
   * Разверните раздел **Расширенные параметры**.
   
   * В поле **Поведение** выберите **Независимо от часового пояса**.
   
   * Нажмите кнопку **Done**(Готово).

4.  Создайте столбец для планируемого окончания визита

    * Нажмите **Добавить столбец**.
    
    * В поле **Отображаемое имя** введите **Планируемое окончание**.
    
    * В поле **Тип данных** выберите **Дата и время**.
    
    * В поле **Обязательно** выберите вариант **Обязательно**.
    
    * Разверните раздел **Расширенные параметры**.
    
    * В поле **Поведение** выберите **Независимо от часового пояса**.
    
    * Нажмите кнопку **Done**(Готово).
    
5.  Создайте столбец для фактического начала визита

    * Нажмите **Добавить столбец**.
    
    * В поле **Отображаемое имя** введите **Фактическое начало**.
    
    * В поле **Тип данных** выберите **Дата и время**.
    
    * В поле **Обязательно** оставьте значение **Необязательно**.
    
    * Разверните раздел **Расширенные параметры**.
    
    * В поле **Поведение** выберите **Независимо от часового пояса**.
    
    * Нажмите кнопку **Done**(Готово).
    
6.  Создайте столбец для фактического окончания визита

    * Нажмите **Добавить столбец**.
    
    * В поле **Отображаемое имя** введите **Фактическое окончание**.
    
    * В поле **Тип данных** выберите **Дата и время**.
    
    * В поле **Обязательно** оставьте значение **Необязательно**.
    
    * Разверните раздел **Расширенные параметры**.
    
    * В поле **Поведение** выберите **Независимо от часового пояса**.
    
    * Нажмите кнопку **Done**(Готово).
    
7.  Создание столбца для кода

    * Нажмите **Добавить столбец**.
    
    * В поле **Отображаемое имя** введите **Код**
    
    * В поле **Тип данных** выберите **Счетчик**.
    
    * В поле **Тип счетчика** выберите **Номер с датой в качестве префикса**.
    
    * Нажмите кнопку **Done**(Готово).
    
8.  Нажмите **Сохранить таблицу**

# <a name="exercise-3-create-relationships"></a>Упражнение \#3. Создание связей

**Цель упражнения.** В ходе этого упражнения вы добавите связи между таблицами.

## <a name="task-1-create-relationships"></a>Задача 1. Создание связей

1.  На экране должна отображаться таблица **Визит** вашего решения **Управление кампусом**. Если это не так, перейдите к данной таблице.

2.  Создайте связь визитов с контактами

    * Выберите вкладку **Связи**.
    
    * Нажмите **Добавить связь** и выберите **Многие к одному**
    
    * В поле **Связанный (один)** выберите **Контакт** 
    
    * В поле **Отображаемое имя столбца для поиска** введите **Посетитель** 
    
    * Нажмите кнопку **Done**(Готово).
    
3.  Создайте связь визитов со зданиями

    * Нажмите **Добавить связь** и выберите **Многие к одному**
    
    * В поле **Связанный (один)** выберите **Здание** 
    
    * Нажмите кнопку **Done**(Готово).
    
4.  Нажмите **Сохранить таблицу**

5.  Затем нажмите кнопку **Назад к решениям** в верхней левой части.

6.  Нажмите **Опубликовать все настройки**.

# <a name="exercise-4-import-data"></a>Упражнение \#4. Импорт данных

**Цель упражнения.** В этом упражнении вы импортируете образец данных в базу Dataverse.

## <a name="task-1-import-solution"></a>Задача 1. Импорт решения

В этой задаче вы импортируете решение, содержащее поток Power Automate, необходимый для полного импорта данных.

1. На вашем компьютере должен быть сохранен файл **DataImport_managed.zip**. Загрузите [решение «Импорт данных»](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/blob/master/Allfiles/DataImport_managed.zip?raw=true), если это не было сделано ранее.

2. Выполните вход в <https://make.powerapps.com>.

3. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

4. В левой области навигации выберите раздел **Решения**.

5. Нажмите **Импорт**, затем **Обзор**. Найдите на своем компьютере и выберите файл **DataImport_managed.zip**, затем нажмите **Далее**.

>   Может появиться следующее сообщение:
>
>   Обнаружено отсутствие зависимостей. Перед установкой данного решения установите следующие решения...
>
>   Это сообщение указывает на то, что модель данных не завершена, префикс издателя не равен **BC**, а имена таблиц **Здание** и **Визит** отличаются от имен, перечисленных в приведенных выше шагах.

6. Нажмите кнопку **Далее**. Должна появиться подсказка о восстановлении подключений. 

7. В раскрывающемся списке **Выберите подключение** выберите **+ Создать подключение**.

8. Откроется новое окно или вкладка браузера. В запросе подключения нажмите **Создать**. При необходимости войдите в систему, чтобы завершить создание подключения.

9. Закройте текущую вкладку и вернитесь на вкладку **Импорт решения**.

10. Выберите вновь созданное подключение. Если это подключение не отображается, нажмите **Обновить**, чтобы обновить список подключений. 

11. Нажмите кнопку **Импортировать**.

12. Дождитесь окончания импорта.

## <a name="task-2-import-data"></a>Задача 2. Импорт данных  

1. Откройте решение **Импорт данных**.

2. Проверьте **состояние** потока **Импорт данных**.

3. Если в поле **Состояние** отображается **Выкл.** , нажмите кнопку **...** рядом с надписью **Импорт данных**, затем выберите **Включить**.

   > **Важно!** Если появится сообщение об ошибке, проверьте соответствие созданных вами таблиц и столбцов с приведенными выше указаниями.

4. Откройте компонент **Импорт данных**. В новой вкладке откроется Power Automate. 

5. Нажмите **Начать** (при наличии этой опции во всплывающем окне). 

6. Нажмите **Выполнить**, затем после подсказки — **Запустить поток**.

7. Нажмите кнопку **Done**(Готово).

8. Дождитесь окончания работы экземпляра потока. Чтобы просмотреть историю работы потока, можно обновить таблицу **Журнал выполнения за 28 дней**. 

    > Целью запуска этого потока было создание примера данных для выполнения следующих заданий. При выполнении следующей задачи вы проверите успешность импорта данных. 

## <a name="task-3-verify-data-import"></a>Задача 3. Проверка импорта данных

1. Вернитесь на предыдущую вкладку Power Apps. Во всплывающем окне нажмите **Готово**. 

2. На левой панели навигации выберите раздел **Решения** и откройте свое решение **Управление кампусом**.

2. Откройте таблицу **Визит** и выберите вкладку **Данные**.

3. Нажмите **Активные визиты** в правом верхнем углу, чтобы открыть переключатель представлений, затем выберите вариант **Все столбцы**. В результате изменится представление, в котором отображаются данные визита. 

    > Если кнопка **Активные визиты** не видна из-за малого разрешения экрана, на ее месте должен быть значок глаза.

    > При успешном выполнении импорта должен отобразиться список строк с данными визитов.

4. Щелкните любое значение в столбце **Здание** и убедитесь, что форма «Здание» открылась в отдельном окне. 

5. Закройте последнее открывшееся окно.

6. Щелкните любое значение в столбце **Посетитель** (может потребоваться прокрутка окна вправо) и убедитесь, что форма «Контакт» открылась в отдельном окне.

7. Закройте последнее открывшееся окно.

# <a name="challenges"></a>Сложности

* Рассмотрите возможность организации *встреч* в рамках данного решения. Что при этом изменится?
* Предложите способ обязательной установки планируемого окончания визита позже планируемого начала. 
* Предложите способ поддержки нескольких собраний в течение одного визита.
* Предложите способ защиты доступа в здание при визитах не только внешних контактов, но и внутреннего персонала.
* Предложите вариант организации посещения определенных зданий только с утверждением руководством. Как процесс получения утверждения изменит модель данных?


---
lab:
  title: "Задание\_1. Моделирование данных"
  module: 'Module 2: Introduction to Microsoft Dataverse'
---

# <a name="lab-1-data-modeling"></a>Задание 1. Моделирование данных

## <a name="scenario"></a>Сценарий

Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий. Сейчас для регистрации посетителей кампуса используются бумажные журналы. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу.

Администрация кампуса хотела бы модернизировать систему регистрации посетителей таким образом, чтобы допуск в здания контролировали сотрудники службы безопасности, а обитатели кампуса предварительно регистрировали все визиты и обязательно записывали их.

В этом курсе обучения вы разработаете приложения и реализуете автоматические процедуры, позволяющие администрации и службе охраны Bellows College контролировать доступ в здания кампуса.

В этом задании вы войдете в свою среду и создадите базу данных Microsoft Dataverse. Кроме того, вы создадите модель данных, пригодную для выполнения следующих функций:

- R1 — отслеживание сведений о запланированных посещениях кампуса;

- R2 — запись основной информации, позволяющей опознавать и отслеживать посетителей;

- R3 — планирование, регистрация визитов и управление ими.

В конце работы вы импортируете образец данных в Microsoft Dataverse.


## <a name="high-level-lab-steps"></a>Обзор этапов работы над общим заданием

Для подготовки учебных сред необходимо выполнить следующее:

- Описание метаданных (таблицы и связи) можно найти в [документе с описанием модели данных](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/blob/master/Allfiles/Campus%20Management.png). Чтобы открыть этот документ в новом окне, щелкните ссылку, удерживая нажатой клавишу CTRL, либо щелкните ссылку правой кнопкой мыши.
- Создание таблицы визитов
- импортировать данные таблицы «Визит» с помощью электронной таблицы Excel.

## <a name="prerequisites"></a>Предварительные требования

- Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»** .

## <a name="things-to-consider-before-you-begin"></a>Что необходимо знать перед началом работы?

- Соглашения об именовании — имена следует вводить внимательно.


## <a name="exercise-1-create-new-table"></a>Упражнение 1. Создание таблицы

**Задача:** В этом упражнении вы создадите пользовательскую таблицу визитов.


### <a name="task-1-create-visit-table-and-columns"></a>Задача \#1. Создание таблицы визитов со столбцами

В таблицу **Визит** будет заноситься информация о посещениях кампуса, в том числе информация о посетителе, планируемое и фактическое время каждого визита.

Каждому визиту желательно присвоить уникальный номер, чтобы посетитель мог просто ввести его и назвать по требованию при регистрации визита.

> При записи даты и времени мы будем использовать поведение **Независимо от часового пояса**, поскольку время визита всегда будет зависеть от расположения здания и не будет меняться при просмотре из другого часового пояса.

1. Войдите в [https://make.powerapps.com](https://make.powerapps.com/) (если это еще не сделано).

1. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

1. С помощью навигации слева разверните элемент **Dataverse** и выберите **Таблицы**.

1. Щелкните **+ Создать таблицу**.

1. В поле **Отображаемое имя** введите **Визит**.

1. Выберите команду **Сохранить**.

1. В разделе **Схема** выберите **Столбцы**.

1. Создайте столбец для планируемого начала визита.

    - Выберите **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Запланированное начало**.

    - В поле **Тип данных** выберите **Дата и время**.

    - В поле **Обязательно** выберите **Требуется для бизнеса**.

    - Разверните **Дополнительные параметры**.

    - В поле **Корректировка часового пояса** выберите **Независимо от часового пояса**.

    - Нажмите **Сохранить**.

1. Создайте столбец для планируемого окончания визита

    - Нажмите кнопку **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Запланированное окончание**.

    - В поле **Тип данных** выберите **Дата и время**.

    - В поле **Обязательно** выберите **Требуется для бизнеса**.

    - Разверните **Дополнительные параметры**.

    - В поле **Корректировка часового пояса** выберите **Независимо от часового пояса**.

    - Нажмите **Сохранить**.

1. Создайте столбец для фактического начала визита

    - Нажмите кнопку **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Фактическое начало**.

    - В поле **Тип данных** выберите **Дата и время**.

    - В поле **Обязательно** оставьте значение **Необязательно**.

    - Разверните **Дополнительные параметры**.

    - В поле **Корректировка часового пояса** выберите **Независимо от часового пояса**.

    - Нажмите **Сохранить**.

1. Создайте столбец для фактического окончания визита

    - Нажмите кнопку **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Фактическое окончание**.

    - В поле **Тип данных** выберите **Дата и время**.

    - В поле **Обязательно** оставьте значение **Необязательно**.

    - Разверните **Дополнительные параметры**.

    - В поле **Корректировка часового пояса** выберите **Независимо от часового пояса**.

    - Нажмите **Сохранить**.

1. Создание столбца для кода

    - Нажмите кнопку **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Код**.

    - В поле **Тип данных** выберите **Счетчик**.

    - В поле **Тип счетчика** выберите **Номер с датой в качестве префикса**.

    - Нажмите **Сохранить**.

1. Создание столбца подстановки «Посетитель»

    - Нажмите кнопку **+ Создать столбец**.

    - В поле **Отображаемое имя** введите **Посетитель**.

    - В поле **Тип данных** выберите **Подстановка**.

    - В поле **Связанная таблица** выберите **Контакт**.

    - Разверните **Дополнительные параметры**.

    - Введите **visitor_id** в поле **Имя связи**.

    - Нажмите **Сохранить**.

## <a name="exercise-2-import-data"></a>Упражнение 2. Импорт данных

**Цель упражнения.** В этом упражнении вы импортируете образец данных в базу Dataverse.

### <a name="task-11-load-excel-file-to-onedrive"></a>Задача \#1.1. Загрузка файла Excel в OneDrive

1. На виртуальной машине в расположении **C:/LabFiles** у вас должен быть файл **Visits.xlsx**. Скачайте файл [Visits.xlsx](https://github.com/MicrosoftLearning/PL-900-Microsoft-Power-Platform-Fundamentals/raw/master/Allfiles/Visits.xlsx), если он отсутствует.

2. Если вы еще не выполнили вход, войдите в [https://make.powerapps.com](https://make.powerapps.com/).

3. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

4. Нажмите кнопку с горизонтальными полосками в левом верхнем углу, чтобы изменить приложения, и выберите **OneDrive**. (Настройка OneDrive может занять некоторое время. Щелкните **Вы можете приступить к работе с OneDrive**, когда увидите этот текст на экране.)

5. Щелкните **Отправить** в верхнем меню и выберите **Файлы**.

6. Найдите и выберите файл **Visits.xlsx** и нажмите кнопку **Открыть**.

 **Примечание.** Этот файл находится в папке **Все файлы** на компьютере.
 
### <a name="task-12-create-a-dataflow"></a>Задание \#1.2. Создание потока данных

1. Если вы еще не выполнили вход, войдите в [https://make.powerapps.com](https://make.powerapps.com/).

2. В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3. С помощью навигации слева разверните элемент **Dataverse** и выберите **Таблицы**.

4. Найдите и откройте таблицу **Визит**, созданную в предыдущем упражнении.

5. В меню сверху рядом с параметром **Импорт** щелкните стрелку раскрывающегося списка и выберите **Импорт данных**.

6. В диалоговом окне **Выбор источника данных** выберите **Книга Excel**.

7. Выберите параметр **Связать с файлом**. Щелкните **Обзор OneDrive**. При появлении запроса войдите с помощью учетных данных Microsoft 365.

8. Выберите файл **Visits.xlsx**, который был отправлен в OneDrive, и нажмите кнопку **Выбрать**.

9. Щелкните **Далее**.

10. В разделе **Выбор данных** установите флажок рядом с книгой Excel **Визиты**.

11. Щелкните **Далее**. Не уходите с этой страницы.

12. Щелкните **Далее**.

13. В разделе **Сопоставление таблиц** выберите **Загрузить в существующую таблицу** в разделе **Параметры загрузки**.

14. В раскрывающемся меню **Целевая таблица** выберите имя таблицы, начинающееся с **crXXX_visit**, (где XXX — случайный набор букв и цифр)

15. В разделе **Сопоставление столбцов**. Сопоставьте столбцы с соответствующими целевыми столбцами.

| Целевые столбцы  | Исходные значения   |
|:---------------------|:----------------|
| crxxx_ActualEnd      | actual end      |
| crxxx_ActualStart    | actual start    |
| crxxx_Code           | code            |
| crxxx_Name           | name            |
| crxxx_ScheduledEnd   | scheduled end   |
| crxxx_ScheduledStart | scheduled start |

16. Щелкните **Далее**.

17. Выберите **Обновить вручную**.

18. Нажмите кнопку **Опубликовать**.

**Примечание**. Импорт данных в таблицу может занять несколько минут. Не беспокойтесь, если появится несколько ошибок, это нормально и не повлияет на остальную часть курса.

### <a name="task-3-verify-data-import"></a>Задача \#3. Проверка импорта данных

1. После импорта данных используйте навигацию в левой части экрана, чтобы снова выбрать таблицу **Визит**.

2. Убедитесь, что в разделе **Столбцы и данные посещений** отображаются импортированные данные.

Поздравляем, вы успешно создали таблицу и импортировали данные.

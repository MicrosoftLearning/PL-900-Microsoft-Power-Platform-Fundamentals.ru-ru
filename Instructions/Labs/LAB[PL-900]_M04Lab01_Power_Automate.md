---
lab:
  title: "Задание\_4. Создание автоматизированного решения"
  module: 'Module 4: Get Started with Power Automate'
---

# Задание 4. Создание автоматизированного решения

**Арендаторы WWL: условия использования.** Если вам предоставляется арендатор в рамках обучения под руководством инструктора, обратите внимание, что арендатор предоставляется для поддержки практических занятий в ходе такого обучения. Арендаторы не должны использоваться совместно или для целей, выходящих за рамки практических занятий. Клиент, используемый в этом курсе, является пробным клиентом и не может использоваться или получить доступ после завершения класса и не имеет права на расширение. Клиентов нельзя переводить на платную подписку. Арендаторы, полученные в рамках этого курса, остаются собственностью корпорации Майкрософт, мы оставляем за собой право получить доступ к ним и вернуть их в любое время. 

## Сценарий

Колледж Bellows является образовательной организацией с несколькими кампусами и программами. Многие преподаватели и администраторы колледжей Беллоу должны посещать мероприятия, а также приобретать предметы. Исторически отслеживание этих расходов было проблемой. 

Администрация кампуса хотела бы модернизировать свою систему отчетности о расходах, предоставив сотрудникам цифровой способ сообщать о расходах. 

На протяжении всего этого курса вы создадите приложения и выполните автоматизацию, чтобы сотрудники Колледжа Bellows могли управлять расходами. 

В этой лаборатории вы создадите поток Power Automate для отправки электронной почты копии отчета о расходах при создании нового отчета о расходах.

## Основные пошаговые действия для выполнения задания

Ниже приведены требования, которые необходимо выполнить для завершения проекта.

- Сотрудники должны получать сообщение электронной почты при отправке отчета о расходах. 

### Необходимые компоненты

- Завершение модуля 1 Lab 0 — проверка лабораторной **среды**

## Упражнение 1. Создание потока уведомлений отчета о расходах

**Цель.** В этом упражнении вы создадите поток Power Automate, реализующий соответствующее требование. 

### Задача #1. Создание потока

1. Перейдите на страницу https://make.powerapps.com.

1. Возможно, потребуется повторно выполнить проверку подлинности, при необходимости нажмите кнопку **"Войти** " и следуйте инструкциям.

1. **Выберите среду Dev One** в правом верхнем углу, если она еще не выбрана.

1. В левой области навигации щелкните **Потоки**.

1. При появлении запроса выберите **Начало работы**.

1. Нажмите **+ Создать поток**, а затем выберите **Автоматизированный облачный поток**.

1. Введите уведомление о расходах для **имени** потока.

1. В **разделе "Выбор триггера** потока" найдите Dataverse

1. Выберите триггер **при добавлении, изменении или удалении** строки, а затем нажмите кнопку **"Создать**".

1. Укажите условия триггера для потока, как показано ниже.

    1. Выберите **Добавлено** для параметра **Тип изменения**
    
    1. Выбор **отчета** о расходах для **имени таблицы**

    1. Выберите значение **Организация** для параметра **Область**

    1. Для настройки шага триггера выберите многоточие (**...**), а затем нажмите **Переименовать**. Переименование шага триггера `When an Expense Report is added` 

Это рекомендуется, поэтому вы и другие редакторы потоков могут понять цель шага без необходимости подробно ознакомиться с подробностями.

### Задача #2. Создание шага для получения строки отчета о расходах

1. Выберите **+ Новый шаг**. На этом шаге будут получены сведения о отчете о расходах, включая адрес электронной почты.

1. Поиск dataverse

1. Выберите действие **Получить строку по ИД**.

1. Выбор **пользователей** в качестве **имени таблицы**

1. Выберите поле **Идентификатор строки**. Вы увидите, что откроется окно для выбора **Динамического содержимого** или **Выражений**.

1. **В поле "Идентификатор** строки" выберите **"Владелец" (значение)** из списка динамического содержимого****. На этом шаге вы ищете владельца для строки отчета о расходах, которая была создана для активации этого потока. 

1. В действии **Выбрать строку по идентификатору** нажмите многоточие (**...**) и выберите **Переименовать**. Переименование этого действия "Получить владельца"

Это рекомендуется, поэтому вы и другие редакторы потоков могут понять цель шага без необходимости подробно ознакомиться с подробностями.

### Задача #3. Создание шага для отправки сообщения электронной почты для подтверждения отправки отчета о расходах

1. Выберите **+ Новый шаг**. Это шаг, который отправит сообщение электронной почты лицу, отправившему отчет о расходах.

1. Найдите почту, выберите **действие "Отправить сообщение электронной почты" (версия 2)** в соединителе **Office 365 Outlook** .

1. Если появится запрос на принятие условий использования этого действия, нажмите **Принять**.

1. **Выберите поле "To"** и введите личный адрес электронной почты. (Существует множество способов динамического заполнения адреса электронной почты, но для этого упражнения мы собираемся вручную назначить его.)  

1. В поле "Тема"** введите отчет о расходах **был отправлен

1. Введите приведенный ниже текст в поле **Текст сообщения**.

Вместо полей, указанных в скобках, необходимо поместить динамическое содержимое. Рекомендуется сначала скопировать и вставить весь текст, а затем добавить динамическое содержимое в нужные места.

    Dear {First Name},
    
    Thank you for submitting your expense report for the total amount of {Report Total Amount} with a due date of {Report Due Date}.
    
     
    Best regards,
    Campus Administration
    Bellows College

1. Выделите текст **{Имя}**. Замените его полем **"Имя"** на шаге **"Получить владельца** ".

1. Выделите текст {Общий **объем отчета}** . Замените его полем ****"Общий объем отчета"** при отправке** отчета о расходах.

1. **Выделите текст {Report Due Date} (Дата выполнения отчета).** Замените его полем **"Дата** выполнения отчета" из **шага "Отправка отчета** о расходах".

1. Выберите **Сохранить**.

Оставьте эту вкладку потока открытой для выполнения следующей задачи. Поток должен выглядеть следующим образом:

![Снимок экрана: только что созданный поток](media/lab-4-create-an-automated-solution-01.png)

### Задача 4. Проверка и проверка потока

1. Откройте новую вкладку в браузере и перейдите по адресу https://make.powerapps.com.

1. **Выберите среду Dev One** в правом верхнем углу, если она еще не выбрана.

1. Выберите **"Приложения** " и откройте **приложение** "Отслеживание расходов".

1. Оставив эту вкладку браузера открытой, вернитесь к предыдущей вкладке с вашим потоком.

1. В командной строке выберите **Тестирование**. Выберите **Вручную** и нажмите **Тестировать**.

1. Перейдите на вкладку браузера с открытым приложением на основе модели.

1. С помощью навигации по карте сайта слева выберите **"Отчет о** расходах".

1. Нажмите кнопку **+Создать** , чтобы добавить новую **запись отчета** о расходах.

1. **Выполните запись** отчета о расходах следующим образом:

    - **Имя отчета:** тестовый отчет

    - **Общая сумма отчета:** $750,00

    - **Дата выполнения отчета:** завтра 

1. Нажмите кнопку **Сохранить и закрыть**.

1. Перейдите на вкладку браузера, где запущено тестирование потока. После короткой задержки вы увидите выполнение потока. Здесь вы сможете обнаружить проблемы, если они возникнут в потоке, или подтвердить его успешное выполнение.

После короткой задержки вы увидите сообщение электронной почты в папке "Входящие". 

>**Примечание.** Он может перейти в папку нежелательной почты.

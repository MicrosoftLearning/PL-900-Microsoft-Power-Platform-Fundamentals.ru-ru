---
lab:
  title: Лабораторная работа 6. Создание автоматизированного решения
  module: 'Module 4: Get Started with Power Automate'
ms.openlocfilehash: c37bbf2975aa1964493e93716d0b3aeb32030c99
ms.sourcegitcommit: fc79a9b68a8235b37fd90ef84ba8ae1aa2e581f5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2022
ms.locfileid: "144424644"
---
# <a name="module-4-get-started-with-power-automate"></a>Модуль 4. Начало работы с Power Automate
## <a name="lab-how-to-build-an-automated-solution"></a>Практическое занятие. Создание автоматизированного решения

## <a name="scenario"></a>Сценарий

Bellows College — образовательное учреждение, имеющее на территории своего кампуса несколько зданий. Сейчас для регистрации посетителей кампуса используются бумажные журналы. Информация собирается несогласованно, отсутствуют средства сбора и анализа данных о визитах по всему кампусу.

Администрация кампуса хотела бы модернизировать систему регистрации посетителей таким образом, чтобы допуск в здания контролировали сотрудники службы безопасности, а обитатели кампуса предварительно регистрировали все визиты и обязательно записывали их.

В этом курсе обучения вы разработаете приложения и реализуете автоматические процедуры, позволяющие администрации и службе охраны Bellows College контролировать доступ в здания кампуса.

В этом задании вам предстоит создать потоки Power Automate для автоматизации ряда аспектов управления кампусом.

# <a name="high-level-lab-steps"></a>Обзор этапов работы над общим заданием

Для выполнения проекта необходимо выполнить следующие требования.

-   Персонал охраны должен получать уведомления о посетителях, превысивших предоставленное им время для визита.

## <a name="prerequisites"></a>Предварительные требования

-   Выполнить **задание 0 модуля 0 «Проверка лабораторной среды»** .

-   Выполнить **лабораторную работу 1 модуля 2 «Введение в Microsoft Dataverse»** .

-   Создать контакт «Александр Демидов» с личным адресом электронной почты в

## <a name="things-to-consider-before-you-begin"></a>Что необходимо знать перед началом работы?

-   Как можно измерить превышение длительности визита и обеспечить соблюдение строгих правил?

# <a name="exercise-1-create-visit-notification-flow"></a>Упражнение \#1. Создание потока уведомлений о визитах

**Цель упражнения.** В этом упражнении вы создадите поток Power Automate, который реализует данное требование. Посетителю необходимо отправить электронное письмо с уникальным кодом, присвоенным визиту.

## <a name="task-1-create-a-flow"></a>Задача \#1. Создание потока

1.  Перейдите к <https://make.powerapps.com>. При необходимости повторной аутентификации нажмите **Войти** и следуйте указаниям на экране.

2.  В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

2.  В левой области навигации щелкните **Потоки**.

4.  При появлении запроса выберите **Начало работы**.

5.  Щелкните **Создать поток** и выберите **Автоматизированный облачный поток**.

6.  В разделе **Выбор триггера потока** найдите **Dataverse**.

7.  Выберите триггер **При добавлении, изменении или удалении строки**, а затем нажмите кнопку **Создать**.

8.  Укажите условия триггера для потока, как показано ниже.

    1.  Выберите **Добавлено** для параметра **Тип изменения**

    2.  В поле **Имя таблицы** выберите **Визиты**.

    3.  В поле **Область действия** выберите **Организация**.

    4.  Для настройки шага триггера нажмите многоточие ( **...** ), затем **Переименовать**.
        Введите новое имя этого триггера **"При добавлении визита"** . Это позволит вам и другим редакторам потока понять назначение шага без изучения подробностей.

## <a name="task-2-create-a-step-to-get-the-visitor-row"></a>Задача \#2. Создание шага для получения строки посетителя

1.  Выберите **Новый шаг**. Этот шаг необходим для получения сведений о посетителях, включающих адрес электронной почты.

2.  Найдите **Dataverse**.

3.  Выберите действие **Выбрать строку по идентификатору**.

4.  В поле **Имя таблицы** введите **Контакты**.

5.  В поле **Идентификатор строки** выберите **Посетитель (значение)** из списка динамического содержимого.

6.  В определении этого действия нажмите многоточие ( **...** ), затем **Переименовать**.
        Введите новое имя этого действия **«Выбрать посетителя»** . Это позволит вам и другим редакторам потока понять назначение шага без изучения подробностей.

## <a name="task-3-create-a-step-to-send-an-email-to-the-visitor"></a>Задача \#3. Создание шага для отправки посетителю электронного письма

1.  Нажмите **Новый шаг**. Это шаг предназначен для создания и отправки посетителю электронного письма.

2.  Выполните поиск слова *почта*, выберите соединитель **Office 365 Outlook** и действие **Отправить по электронной почте (V2)** .

3.  Если появится запрос на принятие условий использования этого действия, щелкните **Принять**.

4.  В поле **Кому** выберите **Добавить динамическое содержимое**. 
    
5.  Выберите значение **Электронная почта** из списка динамического содержимого.
        > Notice that it is beneath the **Get the visitor** header. This means you
        are selecting the Email that is related to the Visitor that you looked
        up in the previous step.

5.  В поле **Тема** введите строку **Ваш запланированный визит в Bellows College**.

6.  В поле **Содержимое электронного письма** введите следующее:

>   Вместо полей, указанных в скобках, необходимо поместить динамическое содержимое. Рекомендуется сначала скопировать и вставить весь текст, затем добавить динамический контент в нужные места.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   Dear {First Name},

   You are currently scheduled to visit Bellows Campus from {Scheduled Start} until {Scheduled End}.

   Best regards,

   Campus Administration
   Bellows College
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

7.  Выделите текст **{Имя}** . Замените его значением поля **Имя** с шага **Получить посетителя**.

8.  Выделите текст **{Запланированное начало}** . Замените его значением поля **Запланированное начало** с шага **Получить посетителя**.

9.  Выделите текст **{Запланированное окончание}** . Замените его значением поля **Запланированное окончание** с шага **Получить посетителя**.

10.  Выберите имя потока в верхней части и введите вместо него `Visit
        Notification`.

11.  Выберите команду **Сохранить**.

Оставьте эту вкладку потока открытой для следующей задачи. Ваш поток должен выглядеть примерно так:

![Пример шагов потока.](media/4-Flow.png)

## <a name="task-2-validate-and-test-the-flow"></a>Задача \#2. Проверка и тестирование потока

1.  Откройте новую вкладку в браузере и перейдите по адресу <https://make.powerapps.com>.

2.  В правом верхнем углу экрана выберите свою среду **[ваши инициалы] практика** (если она еще не выбрана).

3.  Щелкните **Приложения** и выберите приложение **Управление кампусом на основе модели**, созданное ранее.

3.  Оставив эту вкладку открытой, вернитесь к предыдущей вкладке с вашим потоком.

4.  На панели команд щелкните **Тестировать**. Выберите **Вручную**, затем **Сохранить и тестировать**.

5.  Используя навигацию в левой части экрана, выберите **Визиты**.

6. Нажмите кнопку **+Создать**, чтобы добавить новую запись **Визит**.

7. Заполните запись «Визит» следующим образом:

    -   **Имя**. Тестовый визит

    -   **Посетитель**. Александр Демидов

    -   **Запланированное начало**. Завтра в 8:00

    -   **Запланированное окончание**. Завтра в 9:00

8. Нажмите кнопку **Сохранить и закрыть**.

После короткой задержки вы увидите сообщение электронной почты в папке "Входящие", так как вы указали электронную почту Александра Демидова в качестве своей личной электронной почты. 

# <a name="challenges"></a>Сложности

-   Форматирование сообщения электронной почты. Как ему придать более профессиональный вид? 
